{"version":3,"sources":["tictactoe/ai.cljs"],"mappings":"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","names":["tictactoe.ai/utility","tictactoe.ai/max-value","board","v","cljs.core.atom","tictactoe.game/win?","G__13553","cljs.core/deref","seq__13555","cljs.core/seq","chunk__13556","count__13557","i__13558","temp__5804__auto__","cljs.core/chunked-seq?","c__5568__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","cljs.core/first","cljs.core/next","action","tictactoe.game/actions","cljs.core/reset!","x__5130__auto__","y__5131__auto__","G__13562","G__13563","tictactoe.ai/min-value","tictactoe.game/play-move","G__13564","seq__13565","chunk__13566","count__13567","i__13568","cljs.core.println","x__5133__auto__","y__5134__auto__","tictactoe.ai/ai-to-win","player","cljs.core._EQ_","G__13569","seq__13570","chunk__13571","count__13572","i__13573","G__13578","G__13579","G__13580","G__13581","G__13582","seq__13583","chunk__13584","count__13585","i__13586","G__13591","G__13592","G__13593","G__13594","tictactoe.ai/chooser","options","max-value","cljs.core.apply","cljs.core/max","cljs.core.map","cljs.core/second","cljs.core.concat","cljs.core/rand-nth","p1__13595#","cljs.core.filter","min-value","cljs.core/min","p1__13596#","tictactoe.ai/ai-to-choose","iter__5523__auto__","s__13598","cljs.core/LazySeq","c__5521__auto__","size__5522__auto__","b__13600","cljs.core/chunk-buffer","i__13599","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__13597","cljs.core/cons","cljs.core/rest"],"sourcesContent":["(ns tictactoe.ai\r\n  (:require [tictactoe.game :as game]))\r\n\r\n(def utility {\"O\" -1\r\n              \"X\" 1\r\n              \"draw\" 0})\r\n\r\n\r\n(defn max-value\r\n  [board]\r\n  (let [v (atom -1000)]\r\n    (if (game/win? board)\r\n      (utility (game/win? board)) \r\n      (do\r\n       (doseq [action (game/actions board)]\r\n         (reset! v (max @v (min-value (game/play-move board action \"O\")))))\r\n       @v))))\r\n\r\n(defn min-value\r\n  [board]\r\n  (let [v (atom 1000)]\r\n    (if (game/win? board)\r\n      (utility (game/win? board))\r\n      (do\r\n       (doseq [action (game/actions board)]\r\n               (do (println (game/play-move board action \"X\"))\r\n                 (reset! v (min @v (max-value (game/play-move board action \"X\"))))))\r\n             @v))))\r\n\r\n(defn ai-to-win\r\n  [board player]\r\n  (if (= player \"X\")\r\n    (let [v (atom -1000)]\r\n    (if (game/win? board)\r\n      (utility (game/win? board))\r\n      (do\r\n        (doseq [action (game/actions board)]\r\n          (reset! v (max @v (ai-to-win (game/play-move board action \"O\") \"O\"))))\r\n        @v)))\r\n    (let [v (atom 1000)]\r\n      (if (game/win? board)\r\n        (utility (game/win? board))\r\n        (do\r\n          (doseq [action (game/actions board)]\r\n            (reset! v (min @v (ai-to-win (game/play-move board action \"X\") \"X\"))))\r\n          @v)))))\r\n\r\n(ai-to-win [[\"X\" \"O\" \"X\"]\r\n            [\"\" \"\" \"\"]\r\n            [\"\" \"\" \"\"]], \"X\")\r\n\r\n(defn chooser\r\n  [options player]\r\n  (if (= player \"X\")\r\n    (let [max-value (apply max (map second (concat options)))]\r\n      (rand-nth (map first (filter #(= max-value (second %)) options))))\r\n    (let [min-value (apply min (map second (concat options)))]\r\n      (rand-nth (map first (filter #(= min-value (second %)) options))))))\r\n\r\n\r\n\r\n(defn ai-to-choose\r\n  [board player]\r\n  (chooser \r\n   (for [action (game/actions board)]\r\n   [ action (ai-to-win (game/play-move board action player) player)])\r\n           player))\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}